<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>우송 주차 현황</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    
</head>
<body>
    <header>
        <a href="/">
            <div class="menubar">
                <img class="logo" src="/images/WSU_logo.png">
                <p class="test">우송 주차 현황</p>
            </div>
        </a>
        <div class="test1">
            <svg class="cog" onclick="location.href='/DBmanage'" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
              </svg>
        </div>
    </header>
   

    <div id="map"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=279dfcb5118231a09c15c572ff511d68">
    </script>
    <script>        
        var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
        var options = { //지도를 생성할 때 필요한 기본 옵션
	        center: new kakao.maps.LatLng(36.33772801771988, 127.4495646858748), //지도의 중심좌표.
	        level: 3 //지도의 레벨(확대, 축소 정도)
        };
        var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴

        "<% data.forEach(function(item, index) {%>"
            var temp = "<%= item.park_identi_number %>";
            var imageSrc = '/images/marker_'+temp+'.svg',
                imageSize = new kakao.maps.Size(50, 50), // 마커이미지의 크기입니다
                imageOption = {offset: new kakao.maps.Point(27, 50)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
            markerPosition = new kakao.maps.LatLng("<%= item.park_area_latitude %>", "<%= item.park_area_longitude %>"); // 마커가 표시될 위치입니다
            window['marker_'+temp] = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage // 마커이미지 설정 
            });
            window['marker_'+temp].setMap(map);
        "<% }); %>"
        //var temp = "H";
        //var imageSrc = '/images/marker_'+temp+'.svg',
        //    imageSize = new kakao.maps.Size(50, 50), // 마커이미지의 크기입니다
        //    imageOption = {offset: new kakao.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
        
        //var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
        //    markerPosition = new kakao.maps.LatLng(park_area[1]["latitude"], park_area[1]["longitude"]); // 마커가 표시될 위치입니다

        ////var marker_test = "var marker_" + temp;
        ////var a = eval(marker_test);
        //window['marker_'+temp] = new kakao.maps.Marker({
        //    position: markerPosition,
        //    image: markerImage // 마커이미지 설정 
        //});
        ////a.setMap(map);  //사용법 1 //보안성 매우 취약
        //window['marker_'+temp].setMap(map); //사용법 2

        



		// 마커에 클릭 이벤트를 등록한다 (우클릭 : rightclick)
		kakao.maps.event.addListener(marker_A, 'click', function() {
		  open("./AreaA", "_self","A");
		});

        kakao.maps.event.addListener(marker_B, 'click', function() {
		  open("./AreaB", "_self","B");
		});

        kakao.maps.event.addListener(marker_C, 'click', function() {
		  open("./AreaC", "_self","C");
		});

        kakao.maps.event.addListener(marker_D, 'click', function() {
		  open("./AreaD", "_self","D");
		});

        kakao.maps.event.addListener(marker_E, 'click', function() {
		  open("./AreaE", "_self","E");
		});

        kakao.maps.event.addListener(marker_F, 'click', function() {
		  open("./AreaF", "_self","F");
		});

        kakao.maps.event.addListener(marker_G, 'click', function() {
		  open("./AreaG", "_self","G");
		});

        kakao.maps.event.addListener(marker_H, 'click', function() {
		  open("./AreaH", "_self","H");
		});

        kakao.maps.event.addListener(marker_I, 'click', function() {
		  open("./AreaI", "_self","I");
		});

        kakao.maps.event.addListener(marker_J, 'click', function() {
            open("./AreaJ", "_self","J");
        });
        kakao.maps.event.addListener(marker_K, 'click', function() {
            open("./AreaK", "_self","K");
        });


        /*//지역 이름 JSON화 가능 및 for문으로 간결하게
        var iwContent = '<a href="./AreaI"><div class="overlay_text">우송정보대학 앞</div></a>'; // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
        var customOverlay = new kakao.maps.CustomOverlay({
            position: new kakao.maps.LatLng("<%= data[8].park_area_latitude %>", "<%= data[8].park_area_longitude %>"),
            content: iwContent
        });
        
        //이거는 전부 작성 해야할듯?
        kakao.maps.event.addListener(marker_I, 'mouseover', function() {
            // 마커에 마우스오버 이벤트가 발생하면 인포윈도우를 마커위에 표시합니다
            //marker_I.setMap();
            customOverlay.setMap(map);
        });
        kakao.maps.event.addListener(marker_I, 'mouseout', function() {
            // 마커에 마우스오버 이벤트가 발생하면 인포윈도우를 마커위에 표시합니다
            //marker_I.setMap(map);
            customOverlay.setMap();
        });*/

        function setDraggable(draggable) {
            // 마우스 드래그로 지도 이동 가능여부를 설정합니다
            map.setDraggable(draggable);    
        }
        function setZoomable(zoomable) {
            // 마우스 휠로 지도 확대,축소 가능여부를 설정합니다
            map.setZoomable(zoomable);    
        }
        setDraggable(false);
        setZoomable(true);
    </script>
</body>
</html>